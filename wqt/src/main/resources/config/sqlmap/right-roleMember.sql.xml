<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="right.roleMember">
    <insert id="insertUserMember" parameterType="com.talkweb.twdpe.base.right.pojo.Member">
		insert into DP_USERROLE(USERID,ROLEID)
		values(#{objectId},#{roleId})
	</insert>
	
	<insert id="insertOrgMember" parameterType="com.talkweb.twdpe.base.right.pojo.Member">
		insert into DP_ORGROLE(
	 
			<if test="null!=inherit "> INHERIT,</if>
	 
		orgId,
		roleId)
		values(
		 
			<if test="null!=inherit "> #{inherit},</if>
	 
		#{objectId},
		#{roleId})
	</insert>
	
	<insert id="insertPositionMember" parameterType="com.talkweb.twdpe.base.right.pojo.Member">
		insert into DP_POSITIONROLE(POSITIONID,ROLEID)
		values(#{objectId},#{roleId})
	</insert>
	
	<delete id="deleteUserMember" parameterType="com.talkweb.twdpe.base.right.pojo.Member" >
		delete from DP_USERROLE
		<where>
			<if test="objectId!=null">
				and userid = #{objectId}
			</if>
			<if test="roleId!=null">
				and roleId = #{roleId}
			</if>
		</where>
	</delete>
	
	<delete id="deleteOrgMember" parameterType="com.talkweb.twdpe.base.right.pojo.Member" >
		delete from DP_ORGROLE
		<where>
			<if test="objectId!=null">
				and orgid = #{objectId}
			</if>
			<if test="roleId!=null">
				and roleId = #{roleId}
			</if>
		</where>
	</delete>
	
	<delete id="deletePositionMember" parameterType="com.talkweb.twdpe.base.right.pojo.Member" >
		delete from DP_POSITIONROLE
		<where>
			<if test="objectId!=null">
				and positionid = #{objectId}
			</if>
			<if test="roleId!=null">
				and roleId = #{roleId}
			</if>
		</where>
	</delete>
	
	<select id="selectUserMembers" resultType="com.talkweb.twdpe.base.right.pojo.Member"
		parameterType="com.talkweb.twdpe.base.right.pojo.Member">
		select * from DP_USERROLE 
		<where>
			<if test="roleId!=null">
				and roleId = #{roleId}
			</if>
			<if test="objectId!=null">
				and userid = #{objectId}
			</if>
		</where>
	</select>
	
	<select id="selectOrgMembers" resultType="com.talkweb.twdpe.base.right.pojo.Member"
		parameterType="com.talkweb.twdpe.base.right.pojo.Member">
		select * from DP_ORGROLE 
		<where>
			<if test="roleId!=null">
				and roleId = #{roleId}
			</if>
			<if test="objectId!=null">
				and orgid = #{objectId}
			</if>
		</where>
	</select>
	
	<select id="selectPositionMembers" resultType="com.talkweb.twdpe.base.right.pojo.Member"
		parameterType="com.talkweb.twdpe.base.right.pojo.Member">
		select * from DP_POSITIONROLE 
		<where>
			<if test="roleId!=null">
				and roleId = #{roleId}
			</if>
			<if test="objectId!=null">
				and positionid = #{objectId}
			</if>
		</where>
	</select>
</mapper>