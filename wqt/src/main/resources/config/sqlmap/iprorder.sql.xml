<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="iprOrder"> 
      
       <!--查询知识产权订单-->
	   <select id="selectIprrOrderPage" 
		        parameterType="com.wqt.user.pojo.UIprOrder" 
		        resultType="com.wqt.user.pojo.UIprOrder">
		    select 
             a.*
             from v_ipr_order  a
             where 1=1
			<if test="null!= orderid and ''!= orderid">
			    and  a.orderid=#{orderid}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= orderkind and ''!= orderkind">
			   and  a.orderkind=#{orderkind}
			</if>
			<if test="null!= ordershopid and ''!= ordershopid">
			   and  a.ordershopid=#{ordershopid}
			</if>
			<if test="null!= sellerid and ''!= sellerid">
			   and  a.sellerid=#{sellerid}
			</if>
			<if test="null!= buyerid and ''!= buyerid">
			   and  a.buyerid=#{buyerid}
			</if>
			<if test="null!= orderstate and ''!= orderstate">
			   and  a.orderstate=#{orderstate}
			</if>
	   </select>

       <!--查询商标交易订单-->
	   <select id="selectIprBrandOrderShop" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderShop" 
		        resultType="com.wqt.ipr.order.pojo.IprBrandOrderShop">
		    select 
             a.*,
             b.brandname,
             b.brandkind,
             b.kindname brandkindname,
             (select photopath from ipr_brand_shopphoto f WHERE b.id=f.brandshopid and f.kind='1')  brandicon,
             b.brandcode,
             b.startvalidity,
             b.endvalidity,
             b.price,
             b.state brandstate
             from ipr_order_shop a,ipr_brand_shop b 
             where 1=1 and a.shopid=b.id
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= orderkind and ''!= orderkind">
			   and  a.orderkind=#{orderkind}
			</if>
			<if test="null!= shopid and ''!= shopid">
			   and  a.shopid=#{shopid}
			</if>
			<if test="null!= sellerid and ''!= sellerid">
			   and  a.sellerid=#{sellerid}
			</if>
			<if test="null!= buyerid and ''!= buyerid">
			   and  a.buyerid=#{buyerid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
			<if test="null!= workerid and ''!= workerid">
			   and  a.workerid=#{workerid}
			</if>
			order by a.id 
	   </select>
	   
	    <!--查询版权交易订单-->
	   <select id="selectIprCopyrightOrderShop" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderShop" 
		        resultType="com.wqt.ipr.order.pojo.IprCopyrightOrderShop">
		    select 
             a.*,
             b.copyrightname,
             (select photopath from ipr_copyright_shopphoto f WHERE b.id=f.copyrightshopid and f.kind='1')  copyrighticon,
             b.copyrightkind,
             b.copyrightkindname,
             b.copyrightcode,
             b.state copyrightstate 
             from ipr_order_shop a,ipr_copyright_shop b  
             where 1=1 and a.shopid=b.id
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= orderkind and ''!= orderkind">
			   and  a.orderkind=#{orderkind}
			</if>
			<if test="null!= shopid and ''!= shopid">
			   and  a.shopid=#{shopid}
			</if>
			<if test="null!= sellerid and ''!= sellerid">
			   and  a.sellerid=#{sellerid}
			</if>
			<if test="null!= buyerid and ''!= buyerid">
			   and  a.buyerid=#{buyerid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
			<if test="null!= workerid and ''!= workerid">
			   and  a.workerid=#{workerid}
			</if>
			order by a.id 
	   </select>
	   
	   <!--查询专利交易订单-->
	   <select id="selectIprPatentOrderShop" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderShop" 
		        resultType="com.wqt.ipr.order.pojo.IprPatentOrderShop">
		    select 
             a.*,
             b.patentname,
             b.patentstate, 
             b.applydate,
             b.patenttype,
             b.kindid,
             b.kindname,
             b.patentno,
             b.shopcode,
             b.validitydate,
             (select photopath from ipr_patent_shopphoto f WHERE a.id=f.patentshopid and f.kind='1')  patenticon,
             b.price,
             b.state patentstatus
             from ipr_order_shop a,ipr_patent_shop b
             where 1=1 and a.shopid=b.id
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= orderkind and ''!= orderkind">
			   and  a.orderkind=#{orderkind}
			</if>
			<if test="null!= shopid and ''!= shopid">
			   and  a.shopid=#{shopid}
			</if>
			<if test="null!= sellerid and ''!= sellerid">
			   and  a.sellerid=#{sellerid}
			</if>
			<if test="null!= buyerid and ''!= buyerid">
			   and  a.buyerid=#{buyerid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
			<if test="null!= workerid and ''!= workerid">
			   and  a.workerid=#{workerid}
			</if>
			order by a.id 
	   </select>
       <!--查询知识产权交易订单-->
	   <select id="selectIprOrderShopList" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderShop" 
		        resultType="com.wqt.ipr.order.pojo.IprOrderShop">
		    select 
             a.*
             from ipr_order_shop a
             where 1=1
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= orderkind and ''!= orderkind">
			   and  a.orderkind=#{orderkind}
			</if>
			<if test="null!= shopid and ''!= shopid">
			   and  a.shopid=#{shopid}
			</if>
			<if test="null!= sellerid and ''!= sellerid">
			   and  a.sellerid=#{sellerid}
			</if>
			<if test="null!= buyerid and ''!= buyerid">
			   and  a.buyerid=#{buyerid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
			<if test="null!= workerid and ''!= workerid">
			   and  a.workerid=#{workerid}
			</if>
			order by id 
	   </select>
	   
	  <!--查询知识产权交易订单-->
	  <select id="selectOneIprOrderShop" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderShop" 
		        resultType="com.wqt.ipr.order.pojo.IprOrderShop">
		    select 
             a.*
             from ipr_order_shop a
             where 1=1
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= buyerid and ''!= buyerid">
			   and  a.buyerid=#{buyerid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
	   </select> 
	   
	  <!--修改知识产权交易订单-->
	  <update id="updateIprOrderShop" parameterType="com.wqt.ipr.order.pojo.IprOrderShop">
		update ipr_order_shop
		<set>
			<trim suffix="" suffixOverrides=",">
				<if test="null!= ordermoney and ''!= ordermoney">ordermoney=#{ordermoney},</if>
				<if test="null!= buycommisionratio and ''!= buycommisionratio">buycommisionratio=#{buycommisionratio},</if>
				<if test="null!= commisionbuy and ''!= commisionbuy">commisionbuy=#{commisionbuy},</if>
				<if test="null!= sailcommisionratio and ''!= sailcommisionratio">sailcommisionratio=#{sailcommisionratio},</if>
				<if test="null!= commisionsaill and ''!= commisionsaill">commisionsaill=#{commisionsaill},</if>
				<if test="null!= reservepayratio and ''!= reservepayratio">reservepayratio=#{reservepayratio},</if>
				<if test="null!= reservemoney and ''!= reservemoney">reservemoney=#{reservemoney},</if>
				<if test="null!= sailordermoney and ''!= sailordermoney">sailordermoney=#{sailordermoney},</if>
				<if test="null!= buyordermoney and ''!= buyordermoney">buyordermoney=#{buyordermoney},</if>
				<if test="null!= state and ''!= state">state=#{state},</if>
				<if test="null!= orderallmoney and ''!= orderallmoney">orderallmoney=#{orderallmoney},</if>
				<if test="null!= workerid and ''!= workerid">workerid=#{workerid},</if>
				<if test="null!= remark and ''!= remark">remark=#{remark},</if>
				<if test="null!= suctime and ''!= suctime">suctime=#{suctime},</if>
			</trim>
		</set>
		where id=#{id}
	   </update>
	   
	   <!-- 删除知识产权交易订单-->
	   <delete id="deleteIprOrderShop" parameterType="com.wqt.ipr.order.pojo.IprOrderShop">
			 delete  from ipr_order_shop a
			 where  1=1
			<if test="id != null and id != ''">
			    and a.id =#{id}
			</if>
	  </delete>
		
      <!--查询知识产权产品订单-->
	  <select id="selectIprOrderProductList" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderProduct" 
		        resultType="com.wqt.ipr.order.pojo.IprOrderProduct">
		    select * from
			(select a.*,b.productname
			from ipr_order_product a ,ipr_brand_product b where a.orderkind=1 and a.productid=b.id
			union ALL
			select a.*,c.productname
			from ipr_order_product a ,ipr_copyright_product c where a.orderkind=2 and a.productid=c.id
			union ALL
			select a.*,d.productname
			from ipr_order_product a ,ipr_patent_product d where a.orderkind=3 and a.productid=d.id
			) aaa
             where 1=1
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= orderkind and ''!= orderkind">
			   and  a.orderkind=#{orderkind}
			</if>
			<if test="null!= productid and ''!= productid">
			   and  a.productid=#{productid}
			</if>
			<if test="null!= userid and ''!= userid">
			   and  a.userid=#{userid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
			<if test="null!= workerid and ''!= workerid">
			   and  a.workerid=#{workerid}
			</if>
			order by  productname desc 
	   </select>
	  
	  
	  <!--查询知识产权产品订单-->
	  <select id="selectOneIprOrderProduct" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderProduct" 
		        resultType="com.wqt.ipr.order.pojo.IprOrderProduct">
		    select 
             a.*
             from ipr_order_product a
             where 1=1
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= userid and ''!= userid">
			   and  a.userid=#{userid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
	   </select>
	   
	  <!--查询商标产品订单-->
	  <select id="selectIprBrandOrderProduct" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderProduct" 
		        resultType="com.wqt.ipr.order.pojo.IprBrandOrderProduct">
		    select 
             a.*,
             b.htmlpath,
             b.brandicon,
             b.productname brandproductname,
             b.productdesc brandproductdesc
             from ipr_order_product a left join ipr_brand_product b on a.productid=b.id  
             where 1=1
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= orderkind and ''!= orderkind">
			   and  a.orderkind=#{orderkind}
			</if>
			<if test="null!= productid and ''!= productid">
			   and  a.productid=#{productid}
			</if>
			<if test="null!= userid and ''!= userid">
			   and  a.userid=#{userid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
			<if test="null!= workerid and ''!= workerid">
			   and  a.workerid=#{workerid}
			</if>
			order by id 
	   </select>
	   
	  <!--查询版权产品订单-->
	  <select id="selectIprCopyrightOrderProduct" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderProduct" 
		        resultType="com.wqt.ipr.order.pojo.IprCopyrightOrderProduct">
		    select 
             a.*,
             b.htmlpath,
             b.copyrighticon,
             b.productname copyrightproductname,
             b.productdesc copyrightproductdesc
             from ipr_order_product a left join ipr_copyright_product b on a.productid=b.id 
             where 1=1
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= orderkind and ''!= orderkind">
			   and  a.orderkind=#{orderkind}
			</if>
			<if test="null!= productid and ''!= productid">
			   and  a.productid=#{productid}
			</if>
			<if test="null!= userid and ''!= userid">
			   and  a.userid=#{userid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
	   </select>
	   
	   <!--查询专利产品订单-->
	  <select id="selectIprPatentOrderProduct" 
		        parameterType="com.wqt.ipr.order.pojo.IprOrderProduct" 
		        resultType="com.wqt.ipr.order.pojo.IprPatentOrderProduct">
		    select 
             a.*,
             b.htmlpath,
             b.patenticon,
             b.productname patentproductname,
             b.productdesc patentproductdesc
             from ipr_order_product a left join ipr_patent_product b on a.productid=b.id 
             where 1=1
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
			<if test="null!= orderkind and ''!= orderkind">
			   and  a.orderkind=#{orderkind}
			</if>
			<if test="null!= productid and ''!= productid">
			   and  a.productid=#{productid}
			</if>
			<if test="null!= userid and ''!= userid">
			   and  a.userid=#{userid}
			</if>
			<if test="null!= state and ''!= state">
			   and  a.state=#{state}
			</if>
	   </select>
	  
	  <!--修改知识产权产品订单-->
	  <update id="updateIprOrderProduct" parameterType="com.wqt.ipr.order.pojo.IprOrderProduct">
		update ipr_order_product
		<set>
			<trim suffix="" suffixOverrides=",">
				<if test="null!= usercontractid and ''!= usercontractid">usercontractid=#{usercontractid},</if>
				<if test="null!= productnum and ''!= productnum">productnum=#{productnum},</if>
				<if test="null!= productid and ''!= productid">productid=#{productid},</if>
				<if test="null!= productprice and ''!= productprice">productprice=#{productprice},</if>
				<if test="null!= rebateprice and ''!= rebateprice">rebateprice=#{rebateprice},</if>
				<if test="null!= state and ''!= state">state=#{state},</if>
				<if test="null!= orderallmoney and ''!= orderallmoney">orderallmoney=#{orderallmoney},</if>
				<if test="null!= ordermoney and ''!= ordermoney">ordermoney=#{ordermoney},</if>
				<if test="null!= paymoney and ''!= paymoney">paymoney=#{paymoney},</if>
				<if test="null!= suctime and ''!= suctime">suctime=#{suctime},</if>
				<if test="null!= remark and ''!= remark">remark=#{remark},</if>
				<if test="null!= workerid and ''!= workerid">workerid=#{workerid},</if>
			</trim>
		</set>
		where id=#{id}
	   </update>
	
	   <!-- 删除知识产权产品订单-->
	   <delete id="deleteIprOrderProduct" parameterType="com.wqt.ipr.order.pojo.IprOrderProduct">
			 delete  from ipr_order_product a
			 where  1=1
			<if test="id != null and id != ''">
			    and a.id =#{id}
			</if>
			<if test="userid != null and userid != ''">
			    and a.userid =#{userid}
			</if>
			<if test="null!= state and ''!= state">
			    and  a.state=#{state}
			</if>
			<if test="null!= workerid and ''!= workerid">
			    and  a.workerid=#{workerid}
			</if>
			<if test="null!= ordercode and ''!= ordercode">
			    and  a.ordercode=#{ordercode}
			</if>
		</delete>
		
	
</mapper>