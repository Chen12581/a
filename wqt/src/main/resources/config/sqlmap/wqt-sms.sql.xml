<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="wqtsms">
       
       
       <!--保存短信信息 -->
       <insert id="insertWqtSms" parameterType="com.sms.pojo.Sms">
		insert into wqt_sms
		(
		<trim suffix="" suffixOverrides=",">
			<if test="null!= mobileno and ''!= mobileno">mobileno,</if>
			<if test="null!= sendtime and ''!= sendtime">sendtime,</if>
			<if test="null!= endtime and ''!= endtime">endtime,</if>
			<if test="null!= kind and ''!= kind">kind,</if>
			<if test="null!= content and ''!= content">content,</if>
		</trim>
		)
		values
		(
		<trim suffix="" suffixOverrides=",">
			<if test="null!= mobileno and ''!= mobileno">#{mobileno},</if>
			<if test="null!= sendtime and ''!= sendtime">#{sendtime},</if>
			<if test="null!= endtime and ''!= endtime">#{endtime},</if>
			<if test="null!= kind and ''!= kind">#{kind},</if>
			<if test="null!= content and ''!= content">#{content},</if>
		</trim>
		)
	  </insert>
	  
	    <!--查询短信信息-->
	  <select id="selectWqtSmsList" 
		        parameterType="com.sms.pojo.Sms" 
		        resultType="com.sms.pojo.Sms">
		    select 
             *
             from wqt_sms a
		     where 1=1
			<if test="null!= id and ''!= id">
			    and  a.id=#{id}
			</if>
			<if test="null!= mobileno and ''!= mobileno">
			   and   a.mobileno=#{mobileno}
			</if>
			<if test="null!= content and ''!= content">
			   and   a.content=#{content}
			</if>
			<if test="null!= sendtime and ''!= sendtime">
			   and   TIMESTAMPDIFF(MINUTE, date_format(sendtime,'%y-%m-%d %H:%i:%s'),date_format(now(),'%y-%m-%d %H:%i:%s'))>10
			</if>
	   </select>
	
	   <!-- 删除短信 -->
	   <delete id="delWqtSms" parameterType="com.sms.pojo.Sms">
			 delete  from wqt_sms
			 where  1=1
			<if test="id != null and id != ''">
			    and id =#{id}
			</if>
			<if test="mobileno != null and mobileno != ''">
			    and mobileno =#{mobileno}
			</if>
		</delete>
</mapper>